(this.webpackJsonpovernat=this.webpackJsonpovernat||[]).push([[0],{170:function(e,t,a){e.exports=a(301)},175:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),l=a.n(o),c=(a(175),a(59)),i=a(8),s=a(49),u=a(336),m=a(342),v=a(35),d=a(346),_=a(155),g=a(156),k=a(15),f=a(18),b=a(343),p=a(338),E=a(335),h=a(302),O=a(334);function j(e){var t=e.searchTerm,a=(e.setTekst,e.handleChoice),o=e.komkode,l=Object(n.useState)([]),c=Object(i.a)(l,2),s=c[0],u=c[1],m=Object(n.useState)(!0),v=Object(i.a)(m,2),d=(v[0],v[1]);Object(n.useEffect)((function(){if(!(t.length<3)){var e="https://dawa.aws.dk/adgangsadresser/autocomplete?q=".concat(t,"&type=adgangsadresse&side=1&per_side=105&noformat=1&kommunekode=").concat(o,"&srid=25832");console.log(e),fetch(e).then((function(e){e.json().then((function(e){u(e)}))}))}}),[t]);var _=s.map((function(e,t){return r.a.createElement(h.a,{key:"".concat(t,"-").concat(e.tekst),value:e.tekst,button:!0,onClick:function(t){return function(e){a(e),d(!1)}(e)}},r.a.createElement(O.a,{primary:e.tekst}))}));return r.a.createElement(E.a,{component:"nav",style:{maxHeight:400,overflow:"auto"}},_)}var S=a(303),y=a(350);function w(e){var t=e.size,a=e.setAdressData,o=e.komkode,l=e.adresseTekst,c=e.setAdresseTekst,s=Object(n.useState)([]),m=Object(i.a)(s,2),d=(m[0],m[1],Object(n.useState)(!0)),_=Object(i.a)(d,2),g=_[0],k=_[1],f=Object(n.useState)(""),E=Object(i.a)(f,2),h=(E[0],E[1],Object(n.useState)({tekst:"",adgangsadresse:{x:"",y:""}})),O=Object(i.a)(h,2),w=(O[0],O[1]),x=Object(n.useState)(""),C=Object(i.a)(x,2);C[0],C[1];return r.a.createElement(u.a,{item:!0,xs:t},r.a.createElement(b.a,{id:"standard-basic",InputLabelProps:{shrink:!0},label:r.a.createElement(v.a,{variant:"h6",component:"h3"},"Overnatningstedets adresse"),fullWidth:!0,value:l,onChange:function(e){k(!0),c(e.target.value)},InputProps:{endAdornment:r.a.createElement(p.a,{position:"end"},r.a.createElement(S.a,{onClick:function(e){c(""),a(""),k(!1)}},r.a.createElement(y.a,null)))}}),g&&r.a.createElement(j,{searchTerm:l,setTekst:c,handleChoice:function(e){k(!1),w(e),c(e.tekst),a(e)},komkode:o}))}var x=a(344),C=Object(s.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function D(e){var t=C(),a=e.errors,n=e.closeAlert,o=r.a.createElement("ul",null,a.map((function(e,t){return r.a.createElement("li",{key:t},e)})));return r.a.createElement("div",{className:t.root},r.a.createElement(x.a,{severity:"error",onClose:function(){return n([])}},o))}var T=Object(s.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function z(e){var t=T(),a=e.closeAlert;return r.a.createElement("div",{className:t.root},r.a.createElement(x.a,{severity:"success",onClose:function(){return a(!1)}},"Formular er sendt"))}var A=a(82),I={overnat_adresse:"",overnat_navn:"",overnat_lokaler:"",overnat_over_50:!1,overnat_tegning_filnavn:"",overnat_antal:"",overnat_start_dato:new Date,overnat_slut_dato:new Date,overnat_start_tid:new Date,overnat_slut_tid:new Date,overnat_kommune:"",overnat_kontaktpers:"",overnat_kontakttlf:"",ansvarl_kontaktpers:"",ansvarl_kontaktlf:"",ansvarl_kontaktmail:"",ansoegn_indsendt:"",the_geom:"",overnat_tegning:""},q=r.a.createContext([{},function(){},function(){},function(){}]),F=function(e){var t=Object(n.useState)(I),a=Object(i.a)(t,2),o=a[0],l=a[1],s=Object(n.useState)(""),u=Object(i.a)(s,2),m=(u[0],u[1],function(e,t){l((function(a){return Object(c.a)(Object(c.a)({},a),{},Object(A.a)({},e,t))}))});return r.a.createElement(q.Provider,{value:[o,m,function(e){Object.keys(e).forEach((function(t){m(t,e[t])}))},function(){return l(I)}]},e.children)};function P(e){var t=e.size,a=e.id,o=e.title,l=e.type,c=(e.evtHandler,Object(n.useContext)(q)),s=Object(i.a)(c,3),m=s[0],d=s[1];s[2];return r.a.createElement(u.a,{item:!0,xs:t},r.a.createElement(b.a,{id:a,type:l||"text",value:m[a],InputLabelProps:{shrink:!0},label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),onChange:function(e){return function(e,t){d(t,e.target.value)}(e,a)},fullWidth:!0}))}var L=a(351),N=a(153),K=a.n(N);function R(e){var t,a=e.setImageSrc,o=r.a.useRef(null),l=Object(n.useContext)(q),c=Object(i.a)(l,3),s=c[0],m=c[1],d=c[2],_=s.overnat_tegning_filnavn,g=new FileReader,k=function(e){e.target.result;console.log("before setImageSrc"),a(g.result),m("overnat_tegning",g.result.replace(/^data:.+;base64,/,""))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{item:!0,xs:5},r.a.createElement(v.a,{style:{color:"rgba(0, 0, 0, 0.54)"},variant:"subtitle1",component:"h3"},"Vedh\xe6ft tegningsmateriale"," ")),r.a.createElement(u.a,{item:!0,xs:2},r.a.createElement("label",{htmlFor:"upload-photo"},r.a.createElement("input",{style:{display:"none"},id:"upload-photo",name:"upload-photo",type:"file",accept:".jpeg,.jpg,.png",onChange:function(e){console.log("file upload: ",e.target.files[0].name);var t=e.target.files[0];e.target.files[0].name;m("overnat_tegning_filnavn",e.target.files[0].name),t&&(g.onload=k,g.readAsDataURL(t))},ref:o}),r.a.createElement(S.a,{color:"primary","aria-label":"upload fil",onClick:function(e){return o.current&&o.current.click()}},r.a.createElement(K.a,null)))),r.a.createElement(u.a,{item:!0,xs:5},_&&r.a.createElement(L.a,{variant:"outlined",label:(t=_,t.length>25?"..."+t.substring(t.length-22):t),size:"medium",color:"secondary",onDelete:function(e){return d({overnat_tegning_filnavn:""}),o.current.value="",void a("")}})))}var B=a(339),M=a(347);function W(e){var t=e.size,a=e.id,o=e.title,l=e.label,c=Object(n.useContext)(q),s=Object(i.a)(c,3),m=s[0],d=s[1],_=s[2];return r.a.createElement(u.a,{item:!0,xs:t},r.a.createElement(B.a,{format:"yyyy-MM-dd",margin:"normal",id:a,label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),value:m[a],onChange:function(e){if(!(e<new Date))switch(a){case"overnat_start_dato":var t=new Date(e),n=new Date(m.overnat_slut_dato),r=n<t?t:n;_({overnat_start_dato:t,overnat_slut_dato:r,overnat_start_tid:t,overnat_slut_tid:r});break;case"overnat_slut_dato":if(new Date(e)<new Date(m.overnat_start_dato))return;d("overnat_slut_dato",new Date(e)),d("overnat_slut_tid",new Date(e));break;default:return}},KeyboardButtonProps:{"aria-label":{label:l}},cancelLabel:"Annulere"}))}function H(e){var t=e.size,a=e.id,o=e.title,l=(e.label,Object(n.useContext)(q)),c=Object(i.a)(l,3),s=c[0],m=c[1];c[2];return r.a.createElement(u.a,{item:!0,xs:t},r.a.createElement(M.a,{margin:"normal",id:a,label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),ampm:!1,value:s[a],onChange:function(e){m(a,new Date(e))},KeyboardButtonProps:{"aria-label":"\xe6ndre tidspunkt"}}))}function J(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{id:"overnat_start_dato",title:"Start dato",size:6}),r.a.createElement(H,{id:"overnat_start_tid",title:"Start tidspunkt",size:6}),r.a.createElement(W,{id:"overnat_slut_dato",title:"Slut dato",size:6}),r.a.createElement(H,{id:"overnat_slut_tid",title:"Slut tidspunkt",size:6}))}var U=a(341),V=[{value:"Aarhus",nummer:751},{value:"Favrskov",nummer:710},{value:"Noordjurs",nummer:707},{value:"Odder",nummer:727},{value:"Sams\xf8",nummer:741},{value:"Skanderborg",nummer:746},{value:"Syddjurs",nummer:706},{value:"Randers",nummer:730}];function $(e){var t=e.size,a=e.id,o=e.title,l=e.setKomkode,c=e.setAdresseTekst,s=Object(n.useContext)(q),m=Object(i.a)(s,3),d=m[0],_=(m[1],m[2]);return r.a.createElement(u.a,{item:!0,xs:t},r.a.createElement(b.a,{id:a,select:!0,value:d.overnat_kommune,InputLabelProps:{shrink:!0},label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),onChange:function(e){var t=e.target.value.split("_"),a=Object(i.a)(t,2),n=a[0];a[1];_({overnat_kommune:e.target.value,overnat_adresse:"",the_geom:""}),l(n),c("")},fullWidth:!0},V.map((function(e){return r.a.createElement(U.a,{key:e.nummer,value:"".concat(e.nummer,"_").concat(e.value)},e.value)}))))}var G=a(340);function Q(e){var t=e.onClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{item:!0,xs:4}),r.a.createElement(u.a,{item:!0,xs:4},r.a.createElement(G.a,{variant:"contained",color:"primary",onClick:t},"Send")),r.a.createElement(u.a,{item:!0,xs:4}))}var X=a(154),Y=a.n(X),Z=Object(s.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,margin:25}}})),ee=function(e){var t=new Date(e).toISOString().split("T")[0],a=new Date(e).toTimeString().split(" ")[0];return"".concat(t," ").concat(a)};var te=function(){var e=Object(n.useContext)(q),t=Object(i.a)(e,4),a=t[0],o=t[1],l=t[2],s=t[3],b=(r.a.useRef(null),Z(),Object(n.useState)({overnat_adresse:"",overnat_navn:"",overnat_lokaler:"",overnat_over_50:!1,overnat_tegning:"",overnat_tegning_filnavn:"",overnat_antal:"",overnat_start_dato:(new Date).toISOString(),overnat_slut_dato:(new Date).toISOString(),overnat_start_tid:(new Date).toISOString(),overnat_slut_tid:(new Date).toISOString(),overnat_kommune:"",overnat_kontaktpers:"",overnat_kontakttlf:"",ansvarl_kontaktpers:"",ansvarl_kontaktlf:"",ansvarl_kontaktmail:"",ansoegn_indsendt:"",gid:"",the_geom:"",file:""})),p=Object(i.a)(b,2),E=(p[0],p[1],f.b().shape({overnat_adresse:f.c().min(1),overnat_navn:f.c().required(),overnat_lokaler:f.c().required(),overnat_over_50:f.c().required(),overnat_antal:f.a().positive().integer(),overnat_start_dato:f.c().required(),overnat_slut_dato:f.c().required(),overnat_start_tid:f.c().required(),overnat_slut_tid:f.c().required(),overnat_kommune:f.c().required(),overnat_kontaktpers:f.c().required(),overnat_kontakttlf:f.c().matches(/^[0-9]{8}$/,"telefonnr skal have 8 tal"),ansvarl_kontaktpers:f.c().required(),ansvarl_kontaktlf:f.c().matches(/^[0-9]{8}$/,"telefonnr skal have 8 tal"),ansvarl_kontaktmail:f.c().email().required()})),h=Object(n.useState)("751|741|727|710|706|707|730|746"),O=Object(i.a)(h,2),j=O[0],S=O[1],y=Object(n.useState)(""),x=Object(i.a)(y,2),C=(x[0],x[1]),T=Object(n.useState)([]),A=Object(i.a)(T,2),I=A[0],F=A[1],L=Object(n.useState)(!1),N=Object(i.a)(L,2),K=N[0],B=N[1],M=Object(n.useState)(""),W=Object(i.a)(M,2),H=W[0],U=W[1];return r.a.createElement(k.a,{utils:_.a,locale:g.a},r.a.createElement(m.a,{maxWidth:"sm"},r.a.createElement(v.a,{variant:"h6",gutterBottom:!0},"Ans\xf8g om midlertidig overnatning"),I.length>0&&r.a.createElement(D,{errors:I,closeAlert:F}),K&&r.a.createElement(z,{closeAlert:B}),r.a.createElement(u.a,{container:!0,spacing:3},r.a.createElement($,{size:12,id:"overnat_kommune",title:"Hvilken kommune",setKomkode:S,setAdresseTekst:U}),r.a.createElement(w,{size:12,setAdressData:function(e){l(""===e?{overnat_adresse:"",the_geom:""}:{overnat_adresse:e.tekst,the_geom:"ST_setsrid(ST_MakePoint(".concat(e.adgangsadresse.x,",").concat(e.adgangsadresse.y,"),25832)")})},komkode:j,adresseTekst:H,setAdresseTekst:U}),r.a.createElement(P,{size:12,id:"overnat_navn",title:"Overnatningstedets Navn"}),r.a.createElement(P,{size:12,id:"overnat_lokaler",title:"Lokaler"}),r.a.createElement(u.a,{item:!0,xs:6},r.a.createElement(v.a,{style:{color:"rgba(0, 0, 0, 0.54)"},variant:"subtitle1",component:"h3"},"Overnatter mere end 50 personer"," ")),r.a.createElement(u.a,{item:!0,xs:6},r.a.createElement(d.a,{color:"primary",checked:a.overnat_over_50,onChange:function(e){console.log("handleCheckbox => ",e.target.value),o("overnat_over_50",e.target.checked)}})),a.overnat_over_50&&r.a.createElement(R,{setImageSrc:C}),r.a.createElement(P,{size:12,id:"overnat_antal",type:"number",title:"Maksimal antal overnatninger"}),r.a.createElement(J,null),r.a.createElement(P,{size:12,id:"overnat_kontaktpers",title:"Navn Kontaktperson"}),r.a.createElement(P,{type:"number",size:6,id:"overnat_kontakttlf",title:"Kontakt tlf."}),r.a.createElement(u.a,{item:!0,xs:12}),r.a.createElement(P,{size:12,id:"ansvarl_kontaktpers",title:"Navn ansvarlig"}),r.a.createElement(P,{type:"number",size:6,id:"ansvarl_kontaktlf",title:"Tlf. ansvarlig"}),r.a.createElement(P,{size:6,id:"ansvarl_kontaktmail",title:"E-mail ansvarlig"}),r.a.createElement(Q,{onClick:function(e){var t=Object(c.a)(Object(c.a)({},a),{},{ansoegn_indsendt:new Date});console.log("asn\xf8gning",t),E.validate(t,{abortEarly:!1}).then((function(e){(function(e){var t={q:e,key:"fbb2d411cfbc7b706c02359402afe195",srs:"25832"};return Y.a.post("https://geocloud.beredskabskort.dk/api/v2/sql/geo",t)})(function(e){var t=Object.keys(e),a=t.join(","),n=t.map((function(t){return"overnat_start_dato"===t||"overnat_slut_dato"===t||"overnat_start_tid"===t||"ansoegn_indsendt"===t||"overnat_slut_tid"===t?"'".concat(ee(e[t]),"'"):"the_geom"===t?"".concat(e[t]):"'".concat(e[t],"'")})).join(",");return"INSERT INTO faelles.midlertidig_overnatning(".concat(a,") VALUES(").concat(n,")")}(t)).then((function(e){B(!0),F([]),U(""),S("751|741|727|710|706|707|730|746"),s(),window.scrollTo({top:0,behavior:"smooth"})})).catch((function(e){F(["Der var fejl ved indsending..."]),B(!1),window.scrollTo({top:0,behavior:"smooth"})}))})).catch((function(e){console.log(e.errors),F(e.errors),window.scrollTo({top:0,behavior:"smooth"})}))}}))))};a(300);var ae=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(F,null,r.a.createElement(te,null)))},ne=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,352)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),o(e),l(e)}))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),ne()}},[[170,1,2]]]);
//# sourceMappingURL=main.f18dbbae.chunk.js.map