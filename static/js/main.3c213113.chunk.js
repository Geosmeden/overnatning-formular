(this.webpackJsonpovernat=this.webpackJsonpovernat||[]).push([[0],{170:function(e,t,a){e.exports=a(301)},175:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),l=a.n(o),s=(a(175),a(59)),c=a(8),i=a(49),u=a(336),m=a(342),v=a(35),d=a(346),_=a(155),g=a(156),f=a(15),b=a(18),k=a(343),p=a(338),E=a(335),h=a(302),O=a(334);function j(e){var t=e.searchTerm,a=(e.setTekst,e.handleChoice),o=e.komkode,l=Object(n.useState)([]),s=Object(c.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(!0),v=Object(c.a)(m,2),d=(v[0],v[1]);Object(n.useEffect)((function(){if(!(t.length<3)){var e="https://dawa.aws.dk/adgangsadresser/autocomplete?q=".concat(t,"&type=adgangsadresse&side=1&per_side=105&noformat=1&kommunekode=").concat(o,"&srid=25832");console.log(e),fetch(e).then((function(e){e.json().then((function(e){u(e)}))}))}}),[t]);var _=i.map((function(e,t){return r.a.createElement(h.a,{key:"".concat(t,"-").concat(e.tekst),value:e.tekst,button:!0,onClick:function(t){return function(e){a(e),d(!1)}(e)}},r.a.createElement(O.a,{primary:e.tekst}))}));return r.a.createElement(E.a,{component:"nav",style:{maxHeight:400,overflow:"auto"}},_)}var S=a(303),y=a(350);function x(e){var t=e.size,a=e.setAdressData,o=e.komkode,l=e.adresseTekst,s=e.setAdresseTekst,i=Object(n.useState)([]),m=Object(c.a)(i,2),d=(m[0],m[1],Object(n.useState)(!0)),_=Object(c.a)(d,2),g=_[0],f=_[1],b=Object(n.useState)(""),E=Object(c.a)(b,2),h=(E[0],E[1],Object(n.useState)({tekst:"",adgangsadresse:{x:"",y:""}})),O=Object(c.a)(h,2),x=(O[0],O[1]),w=Object(n.useState)(""),C=Object(c.a)(w,2);C[0],C[1];return r.a.createElement(u.a,{item:!0,xs:t},r.a.createElement(k.a,{id:"standard-basic",InputLabelProps:{shrink:!0},label:r.a.createElement(v.a,{variant:"h6",component:"h3"},"Overnatningstedets adresse"),fullWidth:!0,value:l,onChange:function(e){f(!0),s(e.target.value)},InputProps:{endAdornment:r.a.createElement(p.a,{position:"end"},r.a.createElement(S.a,{onClick:function(e){s(""),a(""),f(!1)}},r.a.createElement(y.a,null)))}}),g&&r.a.createElement(j,{searchTerm:l,setTekst:s,handleChoice:function(e){f(!1),x(e),s(e.tekst),a(e)},komkode:o}))}var w=a(344),C=Object(i.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function D(e){var t=C(),a=e.errors,n=e.closeAlert,o=r.a.createElement("ul",null,a.map((function(e,t){return r.a.createElement("li",{key:t},e)})));return r.a.createElement("div",{className:t.root},r.a.createElement(w.a,{severity:"error",onClose:function(){return n([])}},o))}var T=Object(i.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function z(e){var t=T(),a=e.closeAlert;return r.a.createElement("div",{className:t.root},r.a.createElement(w.a,{severity:"success",onClose:function(){return a(!1)}},"Formular er sendt"))}var A=a(82),I={ansoeger_mail:"",ansoeger_navn:"",ansoeger_tlf:"",ansoegn_indsendt:"",ansvarl_kontaktmail:"",ansvarl_kontaktpers:"",ansvarl_kontaktlf:"",overnat_adresse:"",overnat_postnr:"",overnat_by:"",overnat_antal:"",overnat_kommune:"",overnat_lokaler:"",overnat_navn:"",overnat_over_150:!1,overnat_slut_dato:new Date,overnat_slut_tid:new Date,overnat_start_dato:new Date,overnat_start_tid:new Date,overnat_tegning:"",overnat_tegning_filnavn:"",the_geom:"",x_coord:"",y_coord:"",overnat_kontaktpers:"",overnat_kontakttlf:""},q=r.a.createContext([{},function(){},function(){},function(){}]),F=function(e){var t=Object(n.useState)(I),a=Object(c.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(""),u=Object(c.a)(i,2),m=(u[0],u[1],function(e,t){l((function(a){return Object(s.a)(Object(s.a)({},a),{},Object(A.a)({},e,t))}))});return r.a.createElement(q.Provider,{value:[o,m,function(e){Object.keys(e).forEach((function(t){m(t,e[t])}))},function(){return l(I)}]},e.children)};function P(e){var t=e.size,a=e.id,o=e.title,l=e.type,s=(e.evtHandler,Object(n.useContext)(q)),i=Object(c.a)(s,3),m=i[0],d=i[1];i[2];return r.a.createElement(u.a,{item:!0,xs:t},r.a.createElement(k.a,{id:a,type:l||"text",value:m[a],InputLabelProps:{shrink:!0},label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),onChange:function(e){return function(e,t){d(t,e.target.value)}(e,a)},fullWidth:!0}))}var L=a(351),N=a(154),R=a.n(N);function B(e){var t,a=e.setImageSrc,o=r.a.useRef(null),l=Object(n.useContext)(q),s=Object(c.a)(l,3),i=s[0],m=s[1],d=s[2],_=i.overnat_tegning_filnavn,g=new FileReader,f=function(e){e.target.result;console.log("before setImageSrc"),a(g.result),m("overnat_tegning",g.result.replace(/^data:.+;base64,/,""))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{item:!0,xs:5},r.a.createElement(v.a,{style:{color:"rgba(0, 0, 0, 0.54)"},variant:"subtitle1",component:"h3"},"Vedh\xe6ft tegningsmateriale"," ")),r.a.createElement(u.a,{item:!0,xs:2},r.a.createElement("label",{htmlFor:"upload-photo"},r.a.createElement("input",{style:{display:"none"},id:"upload-photo",name:"upload-photo",type:"file",accept:".jpeg,.jpg,.png",onChange:function(e){console.log("file upload: ",e.target.files[0].name);var t=e.target.files[0];e.target.files[0].name;m("overnat_tegning_filnavn",e.target.files[0].name),t&&(g.onload=f,g.readAsDataURL(t))},ref:o}),r.a.createElement(S.a,{color:"primary","aria-label":"upload fil",onClick:function(e){return o.current&&o.current.click()}},r.a.createElement(R.a,null)))),r.a.createElement(u.a,{item:!0,xs:5},_&&r.a.createElement(L.a,{variant:"outlined",label:(t=_,t.length>25?"..."+t.substring(t.length-22):t),size:"medium",color:"secondary",onDelete:function(e){return d({overnat_tegning_filnavn:""}),o.current.value="",void a("")}})))}var M=a(339),K=a(347);function W(e){var t=e.size,a=e.id,o=e.title,l=e.label,s=Object(n.useContext)(q),i=Object(c.a)(s,3),m=i[0],d=i[1],_=i[2];return r.a.createElement(u.a,{item:!0,xs:t},r.a.createElement(M.a,{format:"yyyy-MM-dd",margin:"normal",id:a,label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),value:m[a],onChange:function(e){if(!(e<new Date))switch(a){case"overnat_start_dato":var t=new Date(e),n=new Date(m.overnat_slut_dato),r=n<t?t:n;_({overnat_start_dato:t,overnat_slut_dato:r,overnat_start_tid:t,overnat_slut_tid:r});break;case"overnat_slut_dato":if(new Date(e)<new Date(m.overnat_start_dato))return;d("overnat_slut_dato",new Date(e)),d("overnat_slut_tid",new Date(e));break;default:return}},KeyboardButtonProps:{"aria-label":{label:l}},cancelLabel:"Annulere"}))}function H(e){var t=e.size,a=e.id,o=e.title,l=(e.label,Object(n.useContext)(q)),s=Object(c.a)(l,3),i=s[0],m=s[1];s[2];return r.a.createElement(u.a,{item:!0,xs:t},r.a.createElement(K.a,{margin:"normal",id:a,label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),ampm:!1,value:i[a],onChange:function(e){m(a,new Date(e))},KeyboardButtonProps:{"aria-label":"\xe6ndre tidspunkt"}}))}function J(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{id:"overnat_start_dato",title:"Start dato",size:6}),r.a.createElement(H,{id:"overnat_start_tid",title:"Start tidspunkt",size:6}),r.a.createElement(W,{id:"overnat_slut_dato",title:"Slut dato",size:6}),r.a.createElement(H,{id:"overnat_slut_tid",title:"Slut tidspunkt",size:6}))}var U=a(341),V=[{value:"Aarhus",nummer:751},{value:"Favrskov",nummer:710},{value:"Noordjurs",nummer:707},{value:"Odder",nummer:727},{value:"Sams\xf8",nummer:741},{value:"Skanderborg",nummer:746},{value:"Syddjurs",nummer:706},{value:"Randers",nummer:730}];function $(e){var t=e.size,a=e.id,o=e.title,l=e.setKomkode,s=e.setAdresseTekst,i=Object(n.useContext)(q),m=Object(c.a)(i,3),d=m[0],_=(m[1],m[2]);return r.a.createElement(u.a,{item:!0,xs:t},r.a.createElement(k.a,{id:a,select:!0,value:d.overnat_kommune,InputLabelProps:{shrink:!0},label:r.a.createElement(v.a,{variant:"h6",component:"h3"},o),onChange:function(e){var t=e.target.value.split("_"),a=Object(c.a)(t,2),n=a[0];a[1];_({overnat_kommune:e.target.value,overnat_adresse:"",the_geom:""}),l(n),s("")},fullWidth:!0},V.map((function(e){return r.a.createElement(U.a,{key:e.nummer,value:"".concat(e.nummer,"_").concat(e.value)},e.value)}))))}var G=a(340);function Q(e){var t=e.onClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{item:!0,xs:4}),r.a.createElement(u.a,{item:!0,xs:4},r.a.createElement(G.a,{variant:"contained",color:"primary",onClick:t},"Send")),r.a.createElement(u.a,{item:!0,xs:4}))}var X=a(104),Y=a.n(X),Z=Object(i.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,margin:25}}})),ee=function(e){var t=new Date(e).toISOString().split("T")[0],a=new Date(e).toTimeString().split(" ")[0];return"".concat(t," ").concat(a)};var te=function(){var e=Object(n.useContext)(q),t=Object(c.a)(e,4),a=t[0],o=t[1],l=t[2],i=t[3],k=(r.a.useRef(null),Z(),Object(n.useState)({ansoeger_mail:"",ansoeger_navn:"",ansoeger_tlf:"",ansoegn_indsendt:"",ansvarl_kontaktmail:"",ansvarl_kontaktpers:"",ansvarl_kontaktlf:"",overnat_adresse:"",overnat_antal:"",overnat_kommune:"",overnat_lokaler:"",overnat_navn:"",overnat_over_150:!1,overnat_slut_dato:(new Date).toISOString(),overnat_slut_tid:(new Date).toISOString(),overnat_start_dato:(new Date).toISOString(),overnat_start_tid:(new Date).toISOString(),overnat_tegning:"",overnat_tegning_filnavn:"",the_geom:"",gid:"",file:""})),p=Object(c.a)(k,2),E=(p[0],p[1],b.b().shape({ansoeger_mail:b.c().required(),ansoeger_navn:b.c().required(),ansoeger_tlf:b.c().matches(/^[0-9]{8}$/,"telefonnr skal have 8 tal"),ansvarl_kontaktmail:b.c().email().required(),ansvarl_kontaktpers:b.c().required(),ansvarl_kontaktlf:b.c().matches(/^[0-9]{8}$/,"telefonnr skal have 8 tal"),overnat_adresse:b.c().min(1),overnat_antal:b.a().positive().integer(),overnat_kommune:b.c().required(),overnat_lokaler:b.c().required(),overnat_navn:b.c().required(),overnat_over_150:b.c().required(),overnat_slut_dato:b.c().required(),overnat_slut_tid:b.c().required(),overnat_start_dato:b.c().required(),overnat_start_tid:b.c().required()})),h=Object(n.useState)("751|741|727|746"),O=Object(c.a)(h,2),j=O[0],S=O[1],y=Object(n.useState)(""),w=Object(c.a)(y,2),C=(w[0],w[1]),T=Object(n.useState)([]),A=Object(c.a)(T,2),I=A[0],F=A[1],L=Object(n.useState)(!1),N=Object(c.a)(L,2),R=N[0],M=N[1],K=Object(n.useState)(""),W=Object(c.a)(K,2),H=W[0],U=W[1];return r.a.createElement(f.a,{utils:_.a,locale:g.a},r.a.createElement(m.a,{maxWidth:"sm"},r.a.createElement(v.a,{variant:"h6",gutterBottom:!0},"Ans\xf8g om midlertidig overnatning"),I.length>0&&r.a.createElement(D,{errors:I,closeAlert:F}),R&&r.a.createElement(z,{closeAlert:M}),r.a.createElement(u.a,{container:!0,spacing:3},r.a.createElement($,{size:12,id:"overnat_kommune",title:"Hvilken kommune",setKomkode:S,setAdresseTekst:U}),r.a.createElement(x,{size:12,setAdressData:function(e){if(""===e)l({overnat_adresse:"",overnat_postnr:"",overnat_by:"",the_geom:"",x_coord:"",y_coord:""});else{var t=e.tekst.split(","),a=t.length>0?t[0]:e.tekst;l({overnat_adresse:a,overnat_postnr:e.adgangsadresse.postnr,overnat_by:e.adgangsadresse.postnrnavn,the_geom:"ST_setsrid(ST_MakePoint(".concat(e.adgangsadresse.x,",").concat(e.adgangsadresse.y,"),25832)"),x_coord:e.adgangsadresse.x,y_coord:e.adgangsadresse.y})}},komkode:j,adresseTekst:H,setAdresseTekst:U}),r.a.createElement(P,{size:12,id:"overnat_navn",title:"Overnatningstedets Navn"}),r.a.createElement(P,{size:12,id:"overnat_lokaler",title:"Lokaler"}),r.a.createElement(u.a,{item:!0,xs:6},r.a.createElement(v.a,{style:{color:"rgba(0, 0, 0, 0.54)"},variant:"subtitle1",component:"h3"},"Overnatter mere end 50 personer"," ")),r.a.createElement(u.a,{item:!0,xs:6},r.a.createElement(d.a,{color:"primary",checked:a.overnat_over_150,onChange:function(e){console.log("handleCheckbox => ",e.target.value),o("overnat_over_150",e.target.checked)}})),a.overnat_over_150&&r.a.createElement(B,{setImageSrc:C}),r.a.createElement(P,{size:12,id:"overnat_antal",type:"number",title:"Maksimal antal overnatninger"}),r.a.createElement(J,null),r.a.createElement(P,{size:12,id:"ansoeger_navn",title:"Ans\xf8ger navn"}),r.a.createElement(P,{type:"number",size:6,id:"ansoeger_tlf",title:"Ans\xf8ger tlf."}),r.a.createElement(P,{size:6,id:"ansoeger_mail",title:"Ans\xf8ger mail"}),r.a.createElement(u.a,{item:!0,xs:12}),r.a.createElement(P,{size:12,id:"ansvarl_kontaktpers",title:"Navn ansvarlig"}),r.a.createElement(P,{type:"number",size:6,id:"ansvarl_kontaktlf",title:"Tlf. ansvarlig"}),r.a.createElement(P,{size:6,id:"ansvarl_kontaktmail",title:"E-mail ansvarlig"}),r.a.createElement(Q,{onClick:function(e){var t=Object(s.a)(Object(s.a)({},a),{},{ansoegn_indsendt:new Date});console.log("ans\xf8gning",t),E.validate(t,{abortEarly:!1}).then((function(e){!function(e){var t=Object.keys(e),a=t.join(","),n=t.map((function(t){return"overnat_start_dato"===t||"overnat_slut_dato"===t||"overnat_start_tid"===t||"ansoegn_indsendt"===t||"overnat_slut_tid"===t?"'".concat(ee(e[t]),"'"):"the_geom"===t?"".concat(e[t]):"'".concat(e[t],"'")})).join(",");"INSERT INTO faelles.midlertidig_overnatning(".concat(a,") VALUES(").concat(n,")")}(t);(function(e){return e.overnat_over_150=e.overnat_over_150.toString(),Y.a.post("https://geocloud.beredskabskort.dk/extensions/beredskab/controller/formular",e)})(t).then((function(e){M(!0),F([]),U(""),S("751|741|727|746"),i(),window.scrollTo({top:0,behavior:"smooth"})})).catch((function(e){F(["Der var fejl ved indsending..."]),M(!1),window.scrollTo({top:0,behavior:"smooth"})}))})).catch((function(e){console.log(e.errors),F(e.errors),window.scrollTo({top:0,behavior:"smooth"})}))}}))))};a(300);var ae=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(F,null,r.a.createElement(te,null)))},ne=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,352)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),o(e),l(e)}))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root")),ne()}},[[170,1,2]]]);
//# sourceMappingURL=main.3c213113.chunk.js.map